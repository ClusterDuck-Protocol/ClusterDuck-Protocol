<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ClusterDuck Protocol</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_dark.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color: transparent">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 50px;">
  <td id="projectlogo" style="padding:1em"><a href="https://clusterduckprotocol.org/" target="_blank" style="text-decoration: none;"><img alt="Logo" src="cdp_logo_transparent_small.png"/></a></td>
  <td id="projectalign" style="padding-left: 3em;">
   <div id="projectbrief">Firmware for an ad-hoc mesh network of Internet-of-Things devices based on LoRa (Long Range radio) that can be deployed rapidly and cost-effectively.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__2home_2runner_2work_2_cluster_duck-_protocol_2_cluster_duck-_protocol_2src_2include_2boards_2_r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Adding Your Own Board</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a>This directory contains board-specific files for the various boards that are supported by the CDP firmware.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Supported Boards</h1>
<p>The ClusterDuck Protocol currently supports the following boards out of the box:</p>
<ul>
<li><b>Heltec WiFi LoRa 32 V2</b> - <code><a class="el" href="heltec__wifi__lora__32___v2_8h.html">src/include/boards/heltec_wifi_lora_32_V2.h</a></code></li>
<li><b>Heltec WiFi LoRa 32 V3</b> - <code><a class="el" href="heltec__wifi__lora__32___v3_8h.html">src/include/boards/heltec_wifi_lora_32_V3.h</a></code></li>
<li><b>LilyGO T-Beam SX1262</b> - <code><a class="el" href="lilygo__t__beam__sx1262_8h.html">src/include/boards/lilygo_t_beam_sx1262.h</a></code></li>
<li><b>LilyGO T-Beam Supreme ESP32-S3 SX1262</b> - <code><a class="el" href="lilygo__t__beam__supreme__sx1262_8h.html">src/include/boards/lilygo_t_beam_supreme_sx1262.h</a></code></li>
<li><b>TTGO T-Beam V1 SX1276</b> - <code><a class="el" href="ttgo__t__beam__v1__sx1276_8h.html">src/include/boards/ttgo_t_beam_v1_sx1276.h</a></code></li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Board Format</h1>
<p>Some boards will differ in capability, so not all pins will need to be defined. All pins starting Here is what a board file should look like to start:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define CDPCFG_PIN_BAT </span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_BAT_MULDIV </span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LED1 </span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// LoRa configuration</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LORA_CS </span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LORA_DIO0 </span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LORA_DIO1 </span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LORA_RST </span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//GPS configuration</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_GPS_RX </span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_GPS_TX </span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// OLED display settings</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_OLED_CLOCK </span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_OLED_DATA </span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_OLED_RESET </span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_OLED_ROTATION </span></div>
</div><!-- fragment --><p> Any pins currently supported by the firmware directly will need <code>CDPCFG_</code> at the beginning of the pin name. If the pin is not supported by the firmware, you can define it as you see fit for your own purposes. The pins all <b>LoRa</b> boards will have in common are: </p><div class="fragment"><div class="line">CDPCFG_PIN_LED1 </div>
<div class="line">CDPCFG_PIN_LORA_CS </div>
<div class="line">CDPCFG_PIN_LORA_DIO0</div>
<div class="line">CDPCFG_PIN_LORA_DIO1</div>
<div class="line">CDPCFG_PIN_LORA_RST </div>
</div><!-- fragment --><p> If you are using a <b>GPS</b> module, you will also need to define the RX and TX pins: </p><div class="fragment"><div class="line">CDPCFG_GPS_RX</div>
<div class="line">CDPCFG_GPS_TX</div>
</div><!-- fragment --><p> If you are using an <b>OLED</b> display, you will also need to define the following pins: </p><div class="fragment"><div class="line">CDPCFG_PIN_OLED_CLOCK</div>
<div class="line">CDPCFG_PIN_OLED_DATA</div>
<div class="line">CDPCFG_PIN_OLED_RESET</div>
<div class="line">CDPCFG_PIN_OLED_ROTATION</div>
</div><!-- fragment --><p> If you are using a board with a <b>battery</b> module such as the TTGO T-Beam, you will also need to define the following pins: </p><div class="fragment"><div class="line">CDPCFG_PIN_BAT </div>
<div class="line">CDPCFG_BAT_MULDIV </div>
</div><!-- fragment --><p> The GPS, Battery and OLED pins are optional, but if you are using them, you will need to define them in your board file.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Defining the Pins</h1>
<p>The pins for each board are in a pinout diagram made by the manufacturer. The pin numbers you're looking for are the GPIO numbers, not the physical pin numbers. For example, the TTGO T-Beam has the following pinout diagram:</p>
<p><img src="https://www.passion-radio.fr/img/cms/v1-2_1.png" alt="TTGO T-Beam Example Pinout" class="inline"/> <b>NOTE: The manufurers may change the pinout diagram or have the wrong pins labeled, so cross reference with other sources or verify the pins with the manufacturer.</b></p>
<p>After you have the pins you need, they should be defined in the board file like so: </p><div class="fragment"><div class="line"><span class="preprocessor">#define CDPCFG_PIN_BAT 35</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_BAT_MULDIV 200 / 100</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LED1 25</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// LoRa configuration</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LORA_CS 18</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LORA_DIO0 26</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LORA_DIO1 -1</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_LORA_RST 14</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//GPS configuration</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_GPS_RX 34</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_GPS_TX 12</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// OLED display settings</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_OLED_CLOCK 22</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_OLED_DATA 21</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_OLED_RESET 16</span></div>
<div class="line"><span class="preprocessor">#define CDPCFG_PIN_OLED_ROTATION U8G2_R0</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4"></a>
Adding the Board Header</h1>
<p>After you've defined your header file as shown above, you have the option of putting it in the <code>src/include/boards</code> directory as <code>cdp_external_board.h</code> or somewhere else more convenient with whatever filename you choose. If you place it outside that standard directory, you will need to include it in the <code><a class="el" href="cdpcfg_8h.html" title="CDP central compile-time configuration file.">src/include/cdpcfg.h</a></code> file where the other board headers are included: </p><div class="fragment"><div class="line">...</div>
<div class="line"> </div>
<div class="line">#ifdef CDP_EXTERNAL_BOARD</div>
<div class="line"><span class="preprocessor">#include &quot;boards/cdp_external_board.h&quot;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="heltec__wifi__lora__32___v3_8h.html">boards/heltec_wifi_lora_32_V3.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="heltec__wifi__lora__32___v2_8h.html">boards/heltec_wifi_lora_32_V2.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="lilygo__t__beam__sx1262_8h.html">boards/lilygo_t_beam_sx1262.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ttgo__t__beam__v1__sx1276_8h.html">boards/ttgo_t_beam_v1_sx1276.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">...</div>
<div class="ttc" id="aheltec__wifi__lora__32___v2_8h_html"><div class="ttname"><a href="heltec__wifi__lora__32___v2_8h.html">heltec_wifi_lora_32_V2.h</a></div></div>
<div class="ttc" id="aheltec__wifi__lora__32___v3_8h_html"><div class="ttname"><a href="heltec__wifi__lora__32___v3_8h.html">heltec_wifi_lora_32_V3.h</a></div></div>
<div class="ttc" id="alilygo__t__beam__sx1262_8h_html"><div class="ttname"><a href="lilygo__t__beam__sx1262_8h.html">lilygo_t_beam_sx1262.h</a></div></div>
<div class="ttc" id="attgo__t__beam__v1__sx1276_8h_html"><div class="ttname"><a href="ttgo__t__beam__v1__sx1276_8h.html">ttgo_t_beam_v1_sx1276.h</a></div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath" ><!-- id is needed for treeview function! -->
  <ul>
      <li class="footer"><a href="https://github.com/ClusterDuck-Protocol/ClusterDuck-Protocol/wiki" target="_blank">Wiki</a></li>
      <li class="footer"><a href="https://github.com/ClusterDuck-Protocol/ClusterDuck-Protocol" target="_blank">GitHub</a></li>
      <li class="footer"><a href="https://clusterduckprotocol.org/" target="_blank">Project Page</a></li>
      <!-- Add copyright to the left side of the footer-->
      <li class="footer" style="float: left;">&copy; 2018-2024 The ClusterDuck Protocol Authors</li>
      <!-- Add license next to it -->
      <li class="footer" style="float: left;">Licensed under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a></li>
  </ul>
</div>
</body>
</html>