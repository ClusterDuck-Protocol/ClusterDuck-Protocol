; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env]
extra_scripts = pre:tools/example_select.py

[platformio]
description = ClusterDuck Protocol Library
lib_dir = ./src
extra_configs = src/config/*.ini
src_dir = ./examples/Basic-Ducks/MamaDuck
	
	
	default_envs = local_lilygo_t_beam_sx1262

[esp32_base]
extends = cdp_common
platform = espressif32
board = esp32dev
framework = arduino
build_flags = ${cdp_common.build_flags}

[env:release_cdp]
extends = esp32_base
lib_deps = 
	${cdp_common.lib_deps}
	https://github.com/ClusterDuck-Protocol/ClusterDuck-Protocol/archive/refs/tags/4.4.0.zip

[env:local_cdp]
extends = esp32_base
lib_deps = 
	${cdp_common.lib_deps}
	symlink://./

[env:prod_heltec_wifi_lora_32_V2]
extends = env:release_cdp
board = heltec_wifi_lora_32_V2

[env:prod_heltec_wifi_lora_32_V3]
extends = env:release_cdp
board = heltec_wifi_lora_32_V3

[env:prod_lilygo_t_beam_sx1262]
extends = env:release_cdp
board = ttgo-t-beam

[env:prod_lilygo_t_beam_supreme_sx1262]
extends = env:release_cdp
board = esp32-s3-devkitc-1
build_flags = 
	${env:release_cdp.build_flags}
	-DARDUINO_LILYGO_T_BEAM_SUPREME
	-DARDUINO_USB_MODE=1
	-DARDUINO_USB_CDC_ON_BOOT=1
	-DBOARD_HAS_PSRAM
upload_speed = 921600
monitor_speed = 115200

[env:prod_lilygo_t_beam_sx1276]
extends = env:release_cdp
board = ttgo-lora32-v1

[env:prod_ttgo_lora32_v1_3]
extends = env:release_cdp
board = ttgo-lora32-v1
build_flags = 
	${env:cdp_common.build_flags}
	-DTTGO_1_3

[env:local_heltec_wifi_lora_32_V2]
extends = env:local_cdp
board = heltec_wifi_lora_32_V2

[env:local_heltec_wifi_lora_32_V3]
extends = env:local_cdp
board = heltec_wifi_lora_32_V3

[env:local_lilygo_t_beam_sx1262]
extends = env:local_cdp
board = ttgo-t-beam
lib_deps =
	${esp32_base.lib_deps}
	mikalhart/TinyGPSPlus@~1.0.2
	lewisxhe/XPowersLib@^0.3.0
	adafruit/Adafruit uBlox@^1.0.0
	adafruit/Adafruit BusIO@^1.14.1
	adafruit/Adafruit GFX Library@^1.11.5
	adafruit/Adafruit SSD1306 @ ^2.5.7
build_flags =
	${esp32_base.build_flags}
	-DXPOWERS_CHIP_AXP192

[env:local_lilygo_t_beam_supreme_sx1262]
extends = env:local_cdp
board = esp32-s3-devkitc-1
build_flags = 
	${env:local_cdp.build_flags}
	-DARDUINO_LILYGO_T_BEAM_SUPREME
	-DARDUINO_USB_MODE=1
	-DARDUINO_USB_CDC_ON_BOOT=1
	-DBOARD_HAS_PSRAM
upload_speed = 921600
monitor_speed = 115200

[env:local_lilygo_t_beam_sx1276]
extends = env:local_cdp
board = ttgo-lora32-v1

[env:local_ttgo_lora32_v1_3]
extends = env:local_cdp
board = ttgo-lora32-v1
lib_deps = 
	${env:local_cdp.lib_deps}
build_flags = 
	${env:cdp_common.build_flags}
	-DTTGO_1_3